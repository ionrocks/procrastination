!function(){function a(a){for(var b,c=0;c<l.length;c+=1)if(b=l[c],b.test.test(a))return b.parse(a.match(b.test));return!1}function b(a,b){var c=document.getElementById(a);c&&(c.className="",c.innerHTML=b)}function c(a){var b=(a||"").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&").replace(/<a href=\"https?:\/\/(www\.)?reddit\.com/gi,'<a href="').replace(/<a href=/gi,'<a target="_blank" href=').replace(/\<!--(.*?)--\>/g,"").trim();return b?'<div class="body">'+b+"</div>":""}function d(a,b){if(p&&(o.innerHTML=""),p=!1,Array.isArray(a)||(a=[a]),"/r/random"==n)try{var c=a[0].data.children[0];return void(window.location="/r/"+c.data.subreddit)}catch(d){}for(var e,f=0;f<a.length;f+=1)switch(e=a[f],e.kind.toUpperCase()){case"LISTING":var h,d,i=new DOMParser,j=templates.listing(e),k=i.parseFromString(j,"text/html"),l=k.body.childNodes,m=[];for(h=0;h<l.length;h+=1)d=l[h],1==d.nodeType&&m.push(d);for(h=0;h<m.length;h+=1)d=m[h],d.parentNode.removeChild(d),o.appendChild(d);break;case"WIKIPAGE":o.innerHTML=templates.wiki(e)}setTimeout(g,250)}function e(a){var b=n;return b=j.url.parse(b),b.path.match(/\/$/)||(b.path+="/"),b.path+=a,b.path+=".json",b=j.url.stringify(b),j.ajax.jsonp({url:"https://www.reddit.com"+b,param:"jsonp",success:function(b){var c=b.pop(),d=document.getElementById("t1_"+a),e=d.parentNode;switch(e.removeChild(d),c.kind.toUpperCase()){case"LISTING":e.insertAdjacentHTML("beforeend",templates.listing(c))}}}),!1}function f(a){a||(a=(window.location.pathname||"")+(window.location.search||"")),n=a,a=j.url.parse(a),a.path+=".json",a=j.url.stringify(a),a=a.replace(/^\/u\//i,"/user/"),j.ajax.jsonp({url:"https://www.reddit.com"+a,param:"jsonp",success:d})}function g(){var a=document.getElementById("next");if(a&&window.pageYOffset+window.innerHeight>=a.offsetTop){var b=a.getAttribute("data-url");f(b),a.parentNode.removeChild(a)}}function h(a,b){if(r.front.test(a.path))a.path="/"+b;else if(r.subreddit.test(a.path)){var c=a.path.match(r.subreddit);a.path="/r/"+c[1]+"/"+b}else if(r.thread.test(a.path))a.query.sort=b;else if(r.user.test(a.path)){var c=a.path.match(r.user);a.path="/user/"+c[2]+"/"+b}else if(r.subreddits.test(a.path)){var c=a.path.match(r.subreddits);a.path="/subreddits/"+b}else r.search.test(a.path)&&(a.query.sort=b);return j.url.stringify(a).replace(/\?$/,"")}function i(a,b){var c=[];for(var d in b)c.push({text:d,url:h(a,b[d])});document.getElementById("sort-menu").innerHTML=templates.menu({links:c})}!function(a){"use strict";var b=a.prototype,c=b.parseFromString;try{if((new a).parseFromString("","text/html"))return}catch(d){}b.parseFromString=function(a,b){if(/^\s*text\/html\s*(?:;|$)/i.test(b)){var d=document.implementation.createHTMLDocument("");return a.toLowerCase().indexOf("<!doctype")>-1?d.documentElement.innerHTML=a:d.body.innerHTML=a,d}return c.apply(this,arguments)}}(DOMParser),function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.Handlebars=a.Handlebars||b()}(this,function(){var a=function(){"use strict";function a(a){this.string=a}var b;return a.prototype.toString=function(){return""+this.string},b=a}(),b=function(a){"use strict";function b(a){return i[a]}function c(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}function d(a){return a instanceof h?a.toString():null==a?"":a?(a=""+a,k.test(a)?a.replace(j,b):a):a+""}function e(a){return a||0===a?n(a)&&0===a.length?!0:!1:!0}function f(a,b){return(a?a+".":"")+b}var g={},h=a,i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},j=/[&<>"'`]/g,k=/[&<>"'`]/;g.extend=c;var l=Object.prototype.toString;g.toString=l;var m=function(a){return"function"==typeof a};m(/x/)&&(m=function(a){return"function"==typeof a&&"[object Function]"===l.call(a)});var m;g.isFunction=m;var n=Array.isArray||function(a){return a&&"object"==typeof a?"[object Array]"===l.call(a):!1};return g.isArray=n,g.escapeExpression=d,g.isEmpty=e,g.appendContextPath=f,g}(a),c=function(){"use strict";function a(a,b){var d;b&&b.firstLine&&(d=b.firstLine,a+=" - "+d+":"+b.firstColumn);for(var e=Error.prototype.constructor.call(this,a),f=0;f<c.length;f++)this[c[f]]=e[c[f]];d&&(this.lineNumber=d,this.column=b.firstColumn)}var b,c=["description","fileName","lineNumber","message","name","number","stack"];return a.prototype=new Error,b=a}(),d=function(a,b){"use strict";function c(a,b){this.helpers=a||{},this.partials=b||{},d(this)}function d(a){a.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new g("Missing helper: '"+arguments[arguments.length-1].name+"'")}),a.registerHelper("blockHelperMissing",function(b,c){var d=c.inverse,e=c.fn;if(b===!0)return e(this);if(b===!1||null==b)return d(this);if(k(b))return b.length>0?(c.ids&&(c.ids=[c.name]),a.helpers.each(b,c)):d(this);if(c.data&&c.ids){var g=q(c.data);g.contextPath=f.appendContextPath(c.data.contextPath,c.name),c={data:g}}return e(b,c)}),a.registerHelper("each",function(a,b){if(!b)throw new g("Must pass iterator to #each");var c,d,e=b.fn,h=b.inverse,i=0,j="";if(b.data&&b.ids&&(d=f.appendContextPath(b.data.contextPath,b.ids[0])+"."),l(a)&&(a=a.call(this)),b.data&&(c=q(b.data)),a&&"object"==typeof a)if(k(a))for(var m=a.length;m>i;i++)c&&(c.index=i,c.first=0===i,c.last=i===a.length-1,d&&(c.contextPath=d+i)),j+=e(a[i],{data:c});else for(var n in a)a.hasOwnProperty(n)&&(c&&(c.key=n,c.index=i,c.first=0===i,d&&(c.contextPath=d+n)),j+=e(a[n],{data:c}),i++);return 0===i&&(j=h(this)),j}),a.registerHelper("if",function(a,b){return l(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||f.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper("with",function(a,b){l(a)&&(a=a.call(this));var c=b.fn;if(f.isEmpty(a))return b.inverse(this);if(b.data&&b.ids){var d=q(b.data);d.contextPath=f.appendContextPath(b.data.contextPath,b.ids[0]),b={data:d}}return c(a,b)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)}),a.registerHelper("lookup",function(a,b){return a&&a[b]})}var e={},f=a,g=b,h="2.0.0";e.VERSION=h;var i=6;e.COMPILER_REVISION=i;var j={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};e.REVISION_CHANGES=j;var k=f.isArray,l=f.isFunction,m=f.toString,n="[object Object]";e.HandlebarsEnvironment=c,c.prototype={constructor:c,logger:o,log:p,registerHelper:function(a,b){if(m.call(a)===n){if(b)throw new g("Arg not supported with multiple helpers");f.extend(this.helpers,a)}else this.helpers[a]=b},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,b){m.call(a)===n?f.extend(this.partials,a):this.partials[a]=b},unregisterPartial:function(a){delete this.partials[a]}};var o={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){if(o.level<=a){var c=o.methodMap[a];"undefined"!=typeof console&&console[c]}}};e.logger=o;var p=o.log;e.log=p;var q=function(a){var b=f.extend({},a);return b._parent=a,b};return e.createFrame=q,e}(b,c),e=function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=m;if(b!==c){if(c>b){var d=n[c],e=n[b];throw new l("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new l("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){if(!b)throw new l("No environment passed to template");if(!a||!a.main)throw new l("Unknown template object: "+typeof a);b.VM.checkRevision(a.compiler);var c=function(c,d,e,f,g,h,i,j,m){g&&(f=k.extend({},f,g));var n=b.VM.invokePartial.call(this,c,e,f,h,i,j,m);if(null==n&&b.compile){var o={helpers:h,partials:i,data:j,depths:m};i[e]=b.compile(c,{data:void 0!==j,compat:a.compat},b),n=i[e](f,o)}if(null!=n){if(d){for(var p=n.split("\n"),q=0,r=p.length;r>q&&(p[q]||q+1!==r);q++)p[q]=d+p[q];n=p.join("\n")}return n}throw new l("The partial "+e+" could not be compiled when running in runtime-only mode")},d={lookup:function(a,b){for(var c=a.length,d=0;c>d;d++)if(a[d]&&null!=a[d][b])return a[d][b]},lambda:function(a,b){return"function"==typeof a?a.call(b):a},escapeExpression:k.escapeExpression,invokePartial:c,fn:function(b){return a[b]},programs:[],program:function(a,b,c){var d=this.programs[a],e=this.fn(a);return b||c?d=f(this,a,e,b,c):d||(d=this.programs[a]=f(this,a,e)),d},data:function(a,b){for(;a&&b--;)a=a._parent;return a},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c=k.extend({},b,a)),c},noop:b.VM.noop,compilerInfo:a.compiler},e=function(b,c){c=c||{};var f=c.data;e._setup(c),!c.partial&&a.useData&&(f=i(b,f));var g;return a.useDepths&&(g=c.depths?[b].concat(c.depths):[b]),a.main.call(d,b,d.helpers,d.partials,f,g)};return e.isTop=!0,e._setup=function(c){c.partial?(d.helpers=c.helpers,d.partials=c.partials):(d.helpers=d.merge(c.helpers,b.helpers),a.usePartial&&(d.partials=d.merge(c.partials,b.partials)))},e._child=function(b,c,e){if(a.useDepths&&!e)throw new l("must pass parent depths");return f(d,b,a[b],c,e)},e}function f(a,b,c,d,e){var f=function(b,f){return f=f||{},c.call(a,b,a.helpers,a.partials,f.data||d,e&&[b].concat(e))};return f.program=b,f.depth=e?e.length:0,f}function g(a,b,c,d,e,f,g){var h={partial:!0,helpers:d,partials:e,data:f,depths:g};if(void 0===a)throw new l("The partial "+b+" could not be found");return a instanceof Function?a(c,h):void 0}function h(){return""}function i(a,b){return b&&"root"in b||(b=b?o(b):{},b.root=a),b}var j={},k=a,l=b,m=c.COMPILER_REVISION,n=c.REVISION_CHANGES,o=c.createFrame;return j.checkRevision=d,j.template=e,j.program=f,j.invokePartial=g,j.noop=h,j}(b,c,d),f=function(a,b,c,d,e){"use strict";var f,g=a,h=b,i=c,j=d,k=e,l=function(){var a=new g.HandlebarsEnvironment;return j.extend(a,g),a.SafeString=h,a.Exception=i,a.Utils=j,a.escapeExpression=j.escapeExpression,a.VM=k,a.template=function(b){return k.template(b,a)},a},m=l();return m.create=l,m["default"]=m,f=m}(d,a,c,b,e);return f});var j=function(){var a={},b=a.exports={},c=b.ajax=function(a){{var d=a.url,e=(a.method||"GET").toUpperCase(),f=(a.data,a.headers||{}),g=(a.type||"default").toLowerCase(),h=null,i=(a.error,a.success);a.complete}d=b.url.parse(d);var j=function(a){var b=a.responseText;if(a.getAllResponseHeaders){var d=c.headers(a.getAllResponseHeaders());if("default"===g&&"string"==typeof d["content-type"]){var e=d["content-type"];g=e.match(/application\/json/i)?"json":"text"}}switch(g){case"json":try{b=JSON.parse(b)}catch(f){return void 0}break;case"text":}"function"==typeof i&&i(b)},k=!1;d.host&&!b.url.sameorigin(d,""+window.location)&&(k=!0),d=b.url.stringify(d);var l;if(k&&window.XDomainRequest?(l=new XDomainRequest,l.open(e,d,!0),l.onload=j,l.onerror=j,l.ontimeout=j):(window.XMLHttpRequest||window.ActiveXObject)&&(window.XMLHttpRequest?l=new XMLHttpRequest:window.ActiveXObject&&(l=new ActiveXObject("Microsoft.XMLHTTP")),l.open(e,d,!0),l.onreadystatechange=function(){4==l.readyState&&j(l)}),!l)throw new Error("Cannot Make Request In This Browser");if(l.setRequestHeader)for(var m in f)l.setRequestHeader(m,f[m]);l.send(h)};c.headers=function(a){if("string"!=typeof a)throw new Error("Argument Must Be String");var b={};a=a.split("\n");for(var c,d,e,f=0;f<a.length;f+=1)c=a[f],c&&(c=c.split(": "),d=c.shift().toLowerCase(),e=c.join(": "),b[d]=e);return b},c.jsonp=function(a){var c=a.url,d=a.success,e=a.param||"callback",f="_jsonp_"+g.id(),h=b.url.parse(c,!0);h.query[e]=f,h=b.url.stringify(h);var i=document.createElement("script");i.type="text/javascript",i.async=1,i.src=h,window[f]=function(a){"function"==typeof d&&d(a,c,h),i.parentNode.removeChild(i),delete window[f]};var j=document.getElementsByTagName("script")[0];j.parentNode.insertBefore(i,j)};var d=b.array={};d.random=function(a){if(!Array.isArray(a))throw new Error("Argument Must Be Array");return a[Math.floor(Math.random()*a.length)]};var e=b.querystring={};e.parse=function(a){if("string"!=typeof a)throw new Error("Argument Must Be String");var b={};a=a.split("&");for(var c=0,d=a.length;d>c;c+=1){var e=a[c].split("=");if(2==e.length){var f,g=e[0],h=e[1];if(g=decodeURIComponent(g),h=decodeURIComponent(h),f=g.match(/(\[([A-Za-z0-9]+)?\])+$/)){var i=f[1];g=g.substr(0,f.index),i?("undefined"==typeof b[g]&&(b[g]={}),b[g][i]=h):("undefined"==typeof b[g]&&(b[g]=[]),Array.isArray(b[g])&&b[g].push(h))}else b[g]=h}}return b},e.stringify=function(a){var b=2==arguments.length&&1==arguments[1],c=[],d=Array.isArray(a);for(var f in a){var g,h=a[f];if(g=d?"":f,g=b?b+encodeURIComponent("["+g+"]"):encodeURIComponent(g),null===h||void 0===h||h===0/0)c.push(g+"=");else switch(typeof h){case"string":case"number":c.push(g+"="+encodeURIComponent(""+h));break;case"array":case"object":c=c.concat(e.stringify(h,g));break;case"boolean":c.push(g+"="+(h?"true":"false"));break;default:if(h)try{c.push(g+"="+encodeURIComponent(h.toString()))}catch(i){}else c.push(g+"=")}}return b?c:c.join("&")};var f=b.url={};f.parse=function(a,b){if("string"!=typeof a)throw new Error("Argument Must Be String");if(!(b!==!0||e&&e.parse))throw new Error('Optional Depenency "querystring.parse" Not Included');var c=/^(([a-z]+):\/\/)?([^:\/]+)?(:([0-9]+))?([^\?#]+)?(\?([^\#]+))?(#(.*))?$/i,d=a.match(c);if(!d)return!1;var f=d[8]||"";return b&&(f=e.parse(f)),{protocol:d[2]||"",host:d[3]||"",port:d[5]||"",path:d[6]||"",query:f,hash:d[10]||""}},f.sameorigin=function(a,b){return"string"==typeof a&&(a=f.parse(a)),"string"==typeof b&&(b=f.parse(b)),a.host!=b.host?!1:a.port!=b.port?!1:a.protocol!=b.protocol?!1:!0},f.stringify=function(a){if("object"!=typeof a)throw new Error("Argument Must Be Object");var b="";return a.protocol&&(b+=a.protocol+"://"),a.host&&(b+=a.host),a.port&&(b+=":"+a.port),a.path&&(b+=a.path),a.query&&(b+="object"==typeof a.query&&e&&e.stringify?"?"+e.stringify(a.query):"?"+a.query),a.hash&&(b+="#"+a.hash),b};var g=b.util={};return g.id=function(){return Date.now()+""+(g.id._counter+=1)},g.id._counter=0,a.exports}(),k={imgur:"144e95e18d16fda",tumblr:"4Hnzo2ZZTRMRYZpTUn9tZDhkITyrdScN1oHJ24bil0UrR1gLhX",twitterWidget:"583821740998074368"},l=[];l.push({test:/\/\/(www\.|m\.)?youtu\.be\/([a-z0-9\-_]{4,12})/i,parse:function(a){var b=a[2];return function(){return templates.youtube({id:b})}}},{test:/\/\/(www\.|m\.)?youtube\.com\/(.*?)watch(\?|%3f)(.*?)v(=|%3d)([a-z0-9\-_]{4,12})/i,parse:function(a){var b=a[6];return function(){return templates.youtube({id:b})}}}),l.push({test:/\/\/(www\.)?vine\.co\/v\/([a-z0-9]+)/i,parse:function(a){var b=a[2];return function(){return templates.vine({id:b})}}},{test:/\/\/([a-z\.]+)?vine\.co\/r\/videos\/([a-z0-9_\.]+)\.mp4/i,parse:function(a){var b=j.util.id(),c=a[0];return function(){return setTimeout(function(){document.getElementById("gifv-"+b).play()},1e3),templates.gifv({id:b,mp4:c})}}}),l.push({test:/\/\/(www\.)?vimeo\.com\/([0-9]+)/i,parse:function(a){var b=a[2];return function(){return templates.vimeo({id:b})}}}),l.push({test:/\/\/(www\.)?flickr\.com\/photos\/([a-z0-9\-_@]+)\/([0-9]+)/i,parse:function(a){var b=a[2],c=a[3];return function(){return templates.flickr({user:b,photo:c})}}}),l.push({test:/\/\/(www\.|mobile\.)?twitter\.com\/(#!\/)?([a-z0-9\-_]+)\/status(es)?\/([0-9]+)/i,parse:function(a){var b=(a[3],a[5]),c="twitter-tweet-"+j.util.id();return function(){return setTimeout(function(){var a=document.getElementById(c);twttr.widgets.createTweet(b,a,{align:"center"}),a.className=""},500),templates.placeholder({id:c})}}},{test:/\/\/(www\.|mobile\.)?twitter\.com\/(#!\/)?([a-z0-9\-_]+)\/?$/i,parse:function(a){var b=a[3],c="twitter-timeline-"+j.util.id();return function(){return setTimeout(function(){var a=document.getElementById(c);twttr.widgets.createTimeline(k.twitterWidget,a,{screenName:b,dnt:!0}),a.className=""},500),templates.placeholder({id:c})}}}),l.push({test:/\/\/([a-z]{1,6}\.)?gfycat\.com\/([a-z0-9]+)/i,parse:function(a){var c=a[2],d="gfycat-"+j.util.id();return function(){return j.ajax({url:"http://gfycat.com/cajax/get/"+c,success:function(a){"gfyItem"in a&&(setTimeout(function(){document.getElementById("gifv-"+c).play()},1e3),b(d,templates.gifv({id:c,mp4:a.gfyItem.mp4Url,webm:a.gfyItem.webmUrl})))}}),templates.placeholder({id:d})}}}),l.push({test:/\/\/([a-z0-9\-_]+)\.tumblr\.com\/post\/([0-9]{8,16})/i,parse:function(a){var d=a[1],e=a[2],f="tumblr-post-"+j.util.id();return function(){return j.ajax.jsonp({url:"http://api.tumblr.com/v2/blog/"+d+".tumblr.com/posts?id="+e+"&api_key="+k.tumblr,param:"jsonp",success:function(a){var d=null;try{d=a.response.posts[0]}catch(e){}if(d)switch(d.type){case"photo":for(var g=d.photos,h=[],i=0;i<g.length;i+=1)h.push(g[i].alt_sizes[1].url);b(f,templates.album({images:h}));break;case"answer":b(f,templates.answer({question:d.question,answer:c(d.answer)}));break;case"text":b(f,c(d.body));break;case"chat":b(f,templates.chat({messages:d.dialogue}));break;case"link":b(f,c(d.description));break;case"quote":b(f,templates.quote({text:d.text}));break;case"audio":b(f,d.player);break;case"video":var j=d.player[d.player.length-1].embed_code;j=j.replace("<video ",'<video controls="controls" '),b(f,j)}}}),templates.placeholder({id:f})}}}),l.push({test:/\/\/(www\.)?instagram\.com\/p\/([a-z0-9]{4,14})\/?$/i,parse:function(a){return"http://instagram.com/p/"+a[2]+"/media/?size=l"}}),l.push({test:/\/\/(www\.)?livememe\.com\/([a-z0-9]{4,12})/i,parse:function(a){return"http://i.lvme.me/"+a[2]+".jpg"}},{test:/\/\/(www\.)?imgflip\.com\/i\/([a-z0-9]+)/i,parse:function(a){return"https://i.imgflip.com/"+a[2]+".jpg"}},{test:/\/\/(www\.)?memedad.com\/meme\/([0-9]+)/i,parse:function(a){return"http://memedad.com/memes/"+a[2]+".jpg"}},{test:/\/\/(www\.)?makeameme\.org\/meme\/([a-z0-9\-]+)/i,parse:function(a){return"http://makeameme.org/media/created/"+a[2]+".jpg"}});var m=/[sbtmlh]$/;l.push({test:/\/\/([a-z]+\.)?imgur\.com\/([a-z0-9]{4,8})\.gifv/i,parse:function(a){var b=a[2];return function(){return setTimeout(function(){document.getElementById("gifv-"+b).play()},1e3),templates.gifv({id:b,webm:"//i.imgur.com/"+b+".webm",mp4:"//i.imgur.com/"+b+".mp4"})}}},{test:/\/\/([a-z]+\.)?imgur\.com\/((a|album)\/([a-z0-9]{4,8})|(g|gallery)\/([a-z0-9]{5})(\.|\/|$))/i,parse:function(a){var c=a[4]||a[6],d="imgur-album-"+j.util.id();return function(){return j.ajax({url:"https://api.imgur.com/3/album/"+c+".json",headers:{Authorization:"Client-ID "+k.imgur},success:function(a){if(a.success){for(var c=a.data.images,e=[],f=0;f<c.length;f+=1)e.push(c[f].link.replace(".jpg","l.jpg"));b(d,templates.album({images:e}))}}}),templates.placeholder({id:d})}}},{test:/\/\/([a-z]+\.)?imgur\.com\/(g|gallery)\/([a-z0-9]{4,8})/i,parse:function(a){var b=a[3];return m.test(b)||(b+="l"),"http://i.imgur.com/"+b+".jpg"}},{test:/\/\/([a-z]+\.)?imgur\.com\/([a-z0-9]{4,8})(\.gif)?/i,parse:function(a){var b=a[2];return a[3]?"http://i.imgur.com/"+b+".gif":(m.test(b)||(b+="l"),"http://i.imgur.com/"+b+".jpg")}}),l.push({test:/\.(gif|png|jpg|jpeg)$/i,parse:function(a){return a.input}}),this.templates=this.templates||{},this.templates.album=Handlebars.template({1:function(a,b,c,d){var e=this.lambda,f=this.escapeExpression;return'<img src="'+f(e(a,a))+'" />\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return e=b.each.call(a,null!=a?a.images:a,{name:"each",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e?e:""},useData:!0}),this.templates.answer=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j='<div class="body">\n<blockquote><p>'+i((f=null!=(f=b.question||(null!=a?a.question:a))?f:h,typeof f===g?f.call(a,{name:"question",hash:{},data:d}):f))+"</p></blockquote>\n</div>\n";return f=null!=(f=b.answer||(null!=a?a.answer:a))?f:h,e=typeof f===g?f.call(a,{name:"answer",hash:{},data:d}):f,null!=e&&(j+=e),j},useData:!0}),this.templates.chat=Handlebars.template({1:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return"<p><strong>"+h((e=null!=(e=b.label||(null!=a?a.label:a))?e:g,typeof e===f?e.call(a,{name:"label",hash:{},data:d}):e))+"</strong> "+h((e=null!=(e=b.phrase||(null!=a?a.phrase:a))?e:g,typeof e===f?e.call(a,{name:"phrase",hash:{},data:d}):e))+"</p>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f='<div class="body">\n';return e=b.each.call(a,null!=a?a.messages:a,{name:"each",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+"</div>"},useData:!0}),this.templates.comment=Handlebars.template({1:function(a,b,c,d){return""},3:function(a,b,c,d){var e,f=b.helperMissing,g="";return e=(b.child||a&&a.child||f).call(a,a,{name:"child",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(g+=e),g+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g,h=this.lambda,i=this.escapeExpression,j=b.helperMissing,k="function",l=b.blockHelperMissing,m='<div class="comment">\n<div class="meta">\n<p class="breadcrumbs">\n<a href="/user/'+i(h(null!=(e=null!=a?a.data:a)?e.author:e,a))+'" class="author">'+i(h(null!=(e=null!=a?a.data:a)?e.author:e,a))+'</a> <strong>&#9654;</strong> <a href="/r/'+i(h(null!=(e=null!=a?a.data:a)?e.subreddit:e,a))+'">'+i(h(null!=(e=null!=a?a.data:a)?e.subreddit:e,a))+'</a>\n</p>\n<p class="time">';return e=(b.ago||a&&a.ago||j).call(a,null!=(e=null!=a?a.data:a)?e.created_utc:e,{name:"ago",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(m+=e),m+="</p>\n</div>\n",f=null!=(f=b.selftext||(null!=a?a.selftext:a))?f:j,g={name:"selftext",hash:{},fn:this.program(1,d),inverse:this.noop,data:d},e=typeof f===k?f.call(a,g):f,b.selftext||(e=l.call(a,e,g)),null!=e&&(m+=e),m+='\n<div class="replies">\n',e=b.each.call(a,null!=(e=null!=(e=null!=(e=null!=a?a.data:a)?e.replies:e)?e.data:e)?e.children:e,{name:"each",hash:{},fn:this.program(3,d),inverse:this.noop,data:d}),null!=e&&(m+=e),m+"</div>\n</div>"},useData:!0}),this.templates.flickr=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<iframe src="https://www.flickr.com/photos/'+h((e=null!=(e=b.user||(null!=a?a.user:a))?e:g,typeof e===f?e.call(a,{name:"user",hash:{},data:d}):e))+"/"+h((e=null!=(e=b.photo||(null!=a?a.photo:a))?e:g,typeof e===f?e.call(a,{name:"photo",hash:{},data:d}):e))+'/player/" width="100%" height="400" frameborder="0" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>'},useData:!0}),this.templates.gifv=Handlebars.template({1:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<source src="'+h((e=null!=(e=b.webm||(null!=a?a.webm:a))?e:g,typeof e===f?e.call(a,{name:"webm",hash:{},data:d}):e))+'" type="video/webm" />\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j='<video id="gifv-'+i((f=null!=(f=b.id||(null!=a?a.id:a))?f:h,typeof f===g?f.call(a,{name:"id",hash:{},data:d}):f))+'" autoplay="autoplay" loop="loop" muted="muted">\n';return e=b["if"].call(a,null!=a?a.webm:a,{name:"if",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(j+=e),j+'<source src="'+i((f=null!=(f=b.mp4||(null!=a?a.mp4:a))?f:h,typeof f===g?f.call(a,{name:"mp4",hash:{},data:d}):f))+'" type="video/mp4" />\n</video>'},useData:!0}),this.templates.link=Handlebars.template({1:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'href="'+h((e=null!=(e=b.url||(null!=a?a.url:a))?e:g,typeof e===f?e.call(a,{name:"url",hash:{},data:d}):e))+'"\n'},3:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'href="'+h((e=null!=(e=b.url||(null!=a?a.url:a))?e:g,typeof e===f?e.call(a,{name:"url",hash:{},data:d}):e))+'" target="_blank"\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return e=b["if"].call(a,null!=a?a.local:a,{name:"if",hash:{},fn:this.program(1,d),inverse:this.program(3,d),data:d}),null!=e?e:""},useData:!0}),this.templates.listing=Handlebars.template({1:function(a,b,c,d){var e,f=b.helperMissing,g="";return e=(b.child||a&&a.child||f).call(a,a,{name:"child",hash:{},fn:this.program(2,d),inverse:this.noop,data:d}),null!=e&&(g+=e),g+"\n"},2:function(a,b,c,d){return""},4:function(a,b,c,d){var e,f=b.helperMissing,g='<div id="next" data-url="';return e=(b.afterurl||a&&a.afterurl||f).call(a,null!=(e=null!=a?a.data:a)?e.after:e,{name:"afterurl",hash:{},fn:this.program(2,d),inverse:this.noop,data:d}),null!=e&&(g+=e),g+'"></div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="";return e=b.each.call(a,null!=(e=null!=a?a.data:a)?e.children:e,{name:"each",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(f+=e),e=b["if"].call(a,null!=(e=null!=a?a.data:a)?e.after:e,{name:"if",hash:{},fn:this.program(4,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f},useData:!0}),this.templates.menu=Handlebars.template({1:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<li><a href="'+h((e=null!=(e=b.url||(null!=a?a.url:a))?e:g,typeof e===f?e.call(a,{name:"url",hash:{},data:d}):e))+'">'+h((e=null!=(e=b.text||(null!=a?a.text:a))?e:g,typeof e===f?e.call(a,{name:"text",hash:{},data:d}):e))+"</a></li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return e=b.each.call(a,null!=a?a.links:a,{name:"each",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e?e:""},useData:!0}),this.templates.more=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression;return'<a class="more" href="#'+g(f(null!=(e=null!=a?a.data:a)?e.name:e,a))+'" id="'+g(f(null!=(e=null!=a?a.data:a)?e.name:e,a))+'" onclick="return loadMore(\''+g(f(null!=(e=null!=a?a.data:a)?e.id:e,a))+"')\">\n<span>load more comments...</span>\n</a>"},useData:!0}),this.templates.placeholder=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<div class="placeholder" id="'+h((e=null!=(e=b.id||(null!=a?a.id:a))?e:g,typeof e===f?e.call(a,{name:"id",hash:{},data:d}):e))+'"></div>'},useData:!0}),this.templates.post=Handlebars.template({1:function(a,b,c,d){return""},3:function(a,b,c,d){var e,f=b.helperMissing,g='<p class="title">';return e=(b.title||a&&a.title||f).call(a,null!=(e=null!=a?a.data:a)?e.title:e,{name:"title",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(g+=e),g+"</p>\n"},5:function(a,b,c,d){var e,f=b.helperMissing,g='<p class="title"><a ';return e=(b.link||a&&a.link||f).call(a,null!=(e=null!=a?a.data:a)?e.url:e,{name:"link",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(g+=e),g+=">",e=(b.title||a&&a.title||f).call(a,null!=(e=null!=a?a.data:a)?e.title:e,{name:"title",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(g+=e),g+"</a></p>\n"},7:function(a,b,c,d){var e,f="";return e=b["if"].call(a,null!=(e=null!=a?a.data:a)?e.is_self:e,{name:"if",hash:{},fn:this.program(1,d),inverse:this.program(8,d),data:d}),null!=e&&(f+=e),f},8:function(a,b,c,d){var e,f="";return e=b["if"].call(a,null!=(e=null!=a?a.data:a)?e.url:e,{name:"if",hash:{},fn:this.program(9,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f},9:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression;return'<a href="'+g(f(null!=(e=null!=a?a.data:a)?e.url:e,a))+'" target="_blank" class="original-link">original</a>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g,h=this.lambda,i=this.escapeExpression,j=b.helperMissing,k="function",l=b.blockHelperMissing,m='<div class="post">\n<p class="breadcrumbs">\n<a href="/user/'+i(h(null!=(e=null!=a?a.data:a)?e.author:e,a))+'" class="author">'+i(h(null!=(e=null!=a?a.data:a)?e.author:e,a))+'</a> <strong>&#9654;</strong> <a href="/r/'+i(h(null!=(e=null!=a?a.data:a)?e.subreddit:e,a))+'" class="subreddit">'+i(h(null!=(e=null!=a?a.data:a)?e.subreddit:e,a))+'</a>\n</p>\n<p class="time">';return e=(b.ago||a&&a.ago||j).call(a,null!=(e=null!=a?a.data:a)?e.created_utc:e,{name:"ago",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(m+=e),m+="</p>\n",f=null!=(f=b.embeddable||(null!=a?a.embeddable:a))?f:j,g={name:"embeddable",hash:{},fn:this.program(3,d),inverse:this.program(5,d),data:d},e=typeof f===k?f.call(a,g):f,b.embeddable||(e=l.call(a,e,g)),null!=e&&(m+=e),f=null!=(f=b.embed||(null!=a?a.embed:a))?f:j,g={name:"embed",hash:{},fn:this.program(1,d),inverse:this.noop,data:d},e=typeof f===k?f.call(a,g):f,b.embed||(e=l.call(a,e,g)),null!=e&&(m+=e),m+="\n",f=null!=(f=b.embeddable||(null!=a?a.embeddable:a))?f:j,g={name:"embeddable",hash:{},fn:this.program(7,d),inverse:this.noop,data:d},e=typeof f===k?f.call(a,g):f,b.embeddable||(e=l.call(a,e,g)),null!=e&&(m+=e),m+'<a href="'+i(h(null!=(e=null!=a?a.data:a)?e.permalink:e,a))+'" class="comments-link">\nthere are <strong>'+i(h(null!=(e=null!=a?a.data:a)?e.num_comments:e,a))+"</strong> comments\n</a>\n</div>"},useData:!0}),this.templates.quote=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<div class="body">\n<blockquote><p>'+h((e=null!=(e=b.text||(null!=a?a.text:a))?e:g,typeof e===f?e.call(a,{name:"text",hash:{},data:d}):e))+"</p></blockquote>\n</div>"},useData:!0}),this.templates.subreddit=Handlebars.template({1:function(a,b,c,d){return""},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression,h=b.helperMissing,i='<div class="post">\n<p class="breadcrumbs">\n<a href="'+g(f(null!=(e=null!=a?a.data:a)?e.url:e,a))+'" class="subreddit">'+g(f(null!=(e=null!=a?a.data:a)?e.display_name:e,a))+'</a>\n</p>\n<p class="time">';return e=(b.ago||a&&a.ago||h).call(a,null!=(e=null!=a?a.data:a)?e.created_utc:e,{name:"ago",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(i+=e),i+='</p>\n<p class="title"><a href="'+g(f(null!=(e=null!=a?a.data:a)?e.url:e,a))+'">',e=(b.title||a&&a.title||h).call(a,null!=(e=null!=a?a.data:a)?e.title:e,{name:"title",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(i+=e),i+"</a></p>\n</div>"},useData:!0}),this.templates.vimeo=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<iframe src="//player.vimeo.com/video/'+h((e=null!=(e=b.id||(null!=a?a.id:a))?e:g,typeof e===f?e.call(a,{name:"id",hash:{},data:d}):e))+'?color=ffffff&autoplay=0" width="100%" height="300" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'},useData:!0}),this.templates.vine=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<iframe class="vine-embed" src="https://vine.co/v/'+h((e=null!=(e=b.id||(null!=a?a.id:a))?e:g,typeof e===f?e.call(a,{name:"id",hash:{},data:d}):e))+'/embed/postcard" width="100%" height="600" frameborder="0"></iframe>'},useData:!0}),this.templates.wiki=Handlebars.template({1:function(a,b,c,d){return""},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g,h="function",i=b.helperMissing,j=b.blockHelperMissing,k='<div class="wiki">\n';return f=null!=(f=b.selftext||(null!=a?a.selftext:a))?f:i,g={name:"selftext",hash:{},fn:this.program(1,d),inverse:this.noop,data:d},e=typeof f===h?f.call(a,g):f,b.selftext||(e=j.call(a,e,g)),null!=e&&(k+=e),k+"\n</div>"},useData:!0}),this.templates.youtube=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<iframe width="100%" height="300" src="//www.youtube-nocookie.com/embed/'+h((e=null!=(e=b.id||(null!=a?a.id:a))?e:g,
typeof e===f?e.call(a,{name:"id",hash:{},data:d}):e))+'?autoplay=0&rel=0" frameborder="0" allowfullscreen></iframe>'},useData:!0});var n,o=document.getElementById("main"),p=!0,q=/^https?:\/\/(www\.)?reddit\.com/i;Handlebars.registerHelper("title",function(a,b){return(a||"").replace(/&amp;/g,"&").trim()}),Handlebars.registerHelper("child",function(a,b){switch(a.kind){case"t1":return templates.comment(a);case"t3":return templates.post(a);case"t5":return templates.subreddit(a);case"more":return templates.more(a);default:return""}}),Handlebars.registerHelper("afterurl",function(a,b){var c=j.url.parse(n,!0);return c.query.after=a,c.query.count=parseInt(c.query.count||"0",10)+parseInt(c.query.limit||"25",10),j.url.stringify(c)}),Handlebars.registerHelper("embeddable",function(b){return a(this.data.url)||this.data.is_self?b.fn(this):b.inverse(this)}),Handlebars.registerHelper("embed",function(b){if(this.data.url){var d=a(this.data.url);if(d){if("string"==typeof d)return'<img src="'+Handlebars.Utils.escapeExpression(d)+'" />';if("function"==typeof d)return d()}}return c(this.data.selftext_html||this.data.body_html||this.data.content_html)}),Handlebars.registerHelper("link",function(a,b){var c=!1;return q.test(a)&&(c=!0,a=a.replace(q,"")),templates.link({url:Handlebars.Utils.escapeExpression(a),local:c})}),Handlebars.registerHelper("selftext",function(a){return c(this.data.selftext_html||this.data.body_html||this.data.content_html)}),Handlebars.registerHelper("ago",function(a,b){var c=Math.floor(Date.now()/1e3);a=parseInt(a,10);var d=c-a;if(15>d)return"just now";if(60>d)return d+" seconds ago";var e=Math.floor(d/60);if(1==e)return"a minute ago";if(60>e)return e+" minutes ago";var f=Math.floor(e/60);if(1==f)return"an hour ago";if(24>f)return f+" hours ago";var g=Math.floor(f/24);if(1==g)return"yesterday";if(7>g)return g+" days ago";var h=Math.floor(g/7);if(1==h)return"last week";if(4>=h)return h+" weeks ago";var i=Math.floor(g/30.5);if(1==i)return"last month";if(12>i)return i+" months ago";var j=Math.floor(g/365.25);return 1==j?"last year":j+" years ago"}),window.loadMore=e,window.addEventListener("scroll",g,!1),f();var r={front:/^(\/(hot|new|rising|controversial|top|gilded|ads))?\/?$/i,subreddit:/^\/r\/([a-z0-9\-_\+]+)(\/(hot|new|rising|controversial|top|gilded|ads))?\/?$/i,thread:/^\/r\/([a-z0-9\-_]+)\/comments\/([a-z0-9]{6})/i,user:/^\/(u|user)\/([a-z0-9\-_]+)(\/(overview|comments|submitted|gilded))?\/?$/i,subreddits:/^\/subreddits(\/(new|popular))?\/?$/i,search:/^(\/r\/([a-z0-9\-_\+]+))?\/search/i},s={subreddit:{hot:"hot","new":"new",rising:"rising",controversial:"controversial",top:"top",gilded:"gilded"},thread:{best:"confidence",top:"top","new":"new",hot:"hot",controversial:"controversial",old:"old",random:"random"},user:{overview:"overview",comments:"comments",submitted:"submitted",gilded:"gilded"},subreddits:{popular:"popular","new":"new"},search:{relevance:"relevance","new":"new",hot:"hot",top:"top",comments:"comments"}},t=j.url.parse(n||"",!0);r.front.test(t.path)||r.subreddit.test(t.path)?i(t,s.subreddit):r.thread.test(t.path)?i(t,s.thread):r.user.test(t.path)?i(t,s.user):r.subreddits.test(t.path)?i(t,s.subreddits):r.search.test(t.path)&&i(t,s.search),window.twttr=function(a,b,c){var d,e=a.getElementsByTagName(b)[0],f=window.twttr||{};if(!a.getElementById(c))return d=a.createElement(b),d.id=c,d.src="https://platform.twitter.com/widgets.js",e.parentNode.insertBefore(d,e),f._e=[],f.ready=function(a){f._e.push(a)},f}(document,"script","twitter-wjs")}();